(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{540:function(s,t,a){"use strict";a.r(t);var e=a(3),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-环境"}},[s._v("#")]),s._v(" 1. 环境")]),s._v(" "),a("p",[s._v("**操作系统：**CentOS-7")]),s._v(" "),a("p",[s._v("**MySQL：**mysql-5.6")]),s._v(" "),a("p",[a("strong",[s._v("一台虚拟机又克隆了两台")])]),s._v(" "),a("p",[s._v("192.168.102.31　　master")]),s._v(" "),a("p",[s._v("192.168.102.56　　slave")]),s._v(" "),a("p",[s._v("192.168.102.36　　slave")]),s._v(" "),a("p",[s._v("启动/停止")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service  mysqld  start|stop|restart\nsystemctl  start|stop|restart  mysqld本机的话，直接mysql就可以进去了\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_2-主数据库配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-主数据库配置"}},[s._v("#")]),s._v(" 2. 主数据库配置")]),s._v(" "),a("h4",{attrs:{id:"第1步-编辑-etc-my-cnf文件-在-mysqld-下增加如下两行设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1步-编辑-etc-my-cnf文件-在-mysqld-下增加如下两行设置"}},[s._v("#")]),s._v(" 第1步：编辑/etc/my.cnf文件，在[mysqld]下增加如下两行设置：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[mysqld]\nlog-bin=mysql-bin # 非必需\nserver-id=1　　　　# 必需\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926130101829-594250777.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926130255775-226099484.png",alt:"img"}})]),s._v(" "),a("h4",{attrs:{id:"第2步-创建用于数据同步的账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2步-创建用于数据同步的账户"}},[s._v("#")]),s._v(" 第2步：创建用于数据同步的账户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CREATE USER 'repl'@'192.168.102.%' IDENTIFIED BY '123456';\nGRANT REPLICATION SLAVE ON *.* TO 'repl'@'192.168.102.%';\nFLUSH PRIVILEGES;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926131907050-1560169115.png",alt:"img"}})]),s._v(" "),a("h4",{attrs:{id:"第3步-查看master状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3步-查看master状态"}},[s._v("#")]),s._v(" 第3步：查看master状态")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show master status;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132006886-845263690.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132017006-1664294516.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"_3-从数据库配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-从数据库配置"}},[s._v("#")]),s._v(" 3. 从数据库配置")]),s._v(" "),a("h4",{attrs:{id:"第1步-编辑-etc-my-cnf文件-设置server-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1步-编辑-etc-my-cnf文件-设置server-id"}},[s._v("#")]),s._v(" 第1步：编辑/etc/my.cnf文件，设置server-id")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[mysqld]\nserver-id=2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"第2步-执行同步语句-并启动slave"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2步-执行同步语句-并启动slave"}},[s._v("#")]),s._v(" 第2步：执行同步语句，并启动slave")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("change master to master_host='192.168.102.31', master_user='repl', master_password='123456', master_log_file='mysql-bin.000001', master_log_pos=514;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132317459-1483991050.png",alt:"img"}})]),s._v(" "),a("h4",{attrs:{id:"第3步-查看slave状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3步-查看slave状态"}},[s._v("#")]),s._v(" 第3步：查看slave状态")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show slave status\\G;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132522820-2013469834.png",alt:"img"}})]),s._v(" "),a("p",[s._v("另外一台从数据库也是这样设置")]),s._v(" "),a("h2",{attrs:{id:"_4-验证是否同步成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-验证是否同步成功"}},[s._v("#")]),s._v(" 4. 验证是否同步成功")]),s._v(" "),a("p",[s._v("在主数据上操作，从数据库中查看")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132807125-842266308.png",alt:"img"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://img2018.cnblogs.com/blog/874963/201809/874963-20180926132756701-525312938.png",alt:"img"}})]),s._v(" "),a("h2",{attrs:{id:"_5-设置只读账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-设置只读账户"}},[s._v("#")]),s._v(" 5. 设置只读账户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> create user 'pig'@'%' identified by '123456';\nmysql> grant select on test.* to 'pig'@'%';\nmysql> flush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"_6-参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-参考"}},[s._v("#")]),s._v(" 6. 参考")]),s._v(" "),a("p",[a("a",[s._v("https://dev.mysql.com/doc/refman/5.7/en/replication-options-slave.html")])]),s._v(" "),a("p",[a("a",[s._v("http://www.cnblogs.com/gl-developer/p/6170423.html")])]),s._v(" "),a("p",[a("a",[s._v("https://www.cnblogs.com/alvin_xp/p/4162249.html")])]),s._v(" "),a("p",[a("a",[s._v("https://www.cnblogs.com/sos-blue/p/6852945.html")])])])}),[],!1,null,null,null);t.default=r.exports}}]);