(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{531:function(s,n,t){"use strict";t.r(n);var a=t(3),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"elasticsearch的使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch的使用方法"}},[s._v("#")]),s._v(" ElasticSearch的使用方法")]),s._v(" "),t("h2",{attrs:{id:"_1-基础概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-基础概念"}},[s._v("#")]),s._v(" 1. 基础概念")]),s._v(" "),t("p",[s._v("mysql->数据库\t->\t表\t\t->\t   行\t\t     ->  列\nes      ->索引库    ->（type） ->  Document \t->  field")]),s._v(" "),t("h2",{attrs:{id:"_2-es-api的使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-es-api的使用方法"}},[s._v("#")]),s._v(" 2. ES API的使用方法")]),s._v(" "),t("p",[s._v("基于restful形式的api进行管理。\nrestful：\n本质上就是http协议的诠释。\n资源定位\n互联网上所有的内容都看做是资源，每个资源都有个一个唯一的url与之对应。\n例如：\nhttp://www.taobao.com/goods/12776553\n资源操作:\n使用不同形式的http方法对资源进行操作。\n增：put（post）\n删：delete\n改：post（put）\n查：get")]),s._v(" "),t("h2",{attrs:{id:"_3-索引的管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-索引的管理"}},[s._v("#")]),s._v(" 3. 索引的管理")]),s._v(" "),t("h3",{attrs:{id:"_3-1-创建索引库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建索引库"}},[s._v("#")]),s._v(" 3.1 创建索引库")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tput\nurl：\n\thttp://192.168.52.129:9200/{索引名称}\n分片：\n\t早期版本默认是5片，所有片加到一起才是一个完整的索引库。\n    ES7中默认是1片。\n副本：\n\t默认是1\n    每个分片默认都有一个副本。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"_3-2-删除索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-删除索引"}},[s._v("#")]),s._v(" 3.2 删除索引")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tdelete\nurl：\n\thttp://192.168.52.129:9200/{索引名称}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_3-3-设置mapping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-设置mapping"}},[s._v("#")]),s._v(" 3.3 设置mapping")]),s._v(" "),t("p",[s._v("就是索引中文档格式的定义。\n文档中包含的字段的名称、数据类型、是否索引、是否存储、是否分词。\n最好是先定义好mapping然后再添加数据。不定义mapping也可以添加，es会根据Document格式推断出mapping的定义。")]),s._v(" "),t("h4",{attrs:{id:"_3-3-1-创建索引库时定义mapping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-创建索引库时定义mapping"}},[s._v("#")]),s._v(" 3.3.1 创建索引库时定义mapping")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tput\nurl：\n\thttp://192.168.52.129:9200/{索引名称}\n例如：\n\thttp://192.168.52.129:9200/blog\n请求体：\n\t--如果要进行分词处理必须使用text类型，keyword类型不分词。\n\t--如果document中的内容在后续业务中有需要就要存储，否则就可以不存储。不存储也可以分词创建索引，不影响搜索。\n\t--不分词也可以创建索引，如果有查询需要就可以创建索引。例如：身份证号、手机号。\n\n"),t("span",{pre:!0,attrs:{class:"token code keyword"}},[s._v('    {\n        "mappings":{\n            "properties":{\n                "id":{\n                    "type":"long"\n                },\n                "title":{\n                    "type":"text",\t\t\n                    "analyzer":"standard", # 开启分词 使用elasticsearch默认的分词器\n                    "store": "true", # 开启存储，查询时会将字段值存储到磁盘上 查询速度会更\n                    "index":true # 开启索引\n                },\n                "mobile":{\n                    "type":"keyword",\n                    "store": "true",\n                    "index":true\n                 },\n                "comment":{\n                    "type":"text",\t\t\n                    "analyzer":"standard",\n                    "store": "true",\n                    "index":true\n                }\n            }\n    \t}')]),s._v("\n   \t}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("h4",{attrs:{id:"_3-3-2-先创建索引库然后设置mapping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-先创建索引库然后设置mapping"}},[s._v("#")]),s._v(" 3.3.2 先创建索引库然后设置mapping")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tput、post\nurl：\n\thttp://192.168.52.129:9200/{索引名称}/_mapping\n请求体：\n\t{\n\t\t"properties":{\n\t\t\t"id":{\n\t\t\t\t"type":"long"\n\t\t\t},\n\t\t\t"title":{\n\t\t\t\t"type":"text",\t\t\n\t\t\t\t"analyzer":"standard",\n\t\t\t\t"store": "true",\n\t\t\t\t"index":true\n\t\t\t},\n\t\t\t"mobile":{\n\t\t\t\t"type":"keyword",\n\t\t\t\t"store": "true",\n\t\t\t\t"index":true\n\t\t\t},\n\t\t\t"comment":{\n                "type":"text",\t\t\n                "analyzer":"standard",\n                "store": "true",\n                "index":true\n\t\t\t}\n\t\t}\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("h3",{attrs:{id:"_3-4-settings"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-settings"}},[s._v("#")]),s._v(" 3.4 Settings")]),s._v(" "),t("h4",{attrs:{id:"_3-4-1-创建索引库时设置settings"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-创建索引库时设置settings"}},[s._v("#")]),s._v(" 3.4.1 创建索引库时设置settings")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tput\nurl：\n\thttp://192.168.52.129:9200/{索引名称}\n例如：\n\thttp://192.168.52.129:9200/blog\n请求体：\n    {\n\t    "settings":{\n            "number_of_shards": "5", # 分片数量\n            "number_of_replicas": "1" # 副本数量\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h4",{attrs:{id:"_3-4-2-创建索引之后修改settings"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-创建索引之后修改settings"}},[s._v("#")]),s._v(" 3.4.2 创建索引之后修改settings")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('注意：分片数量在创建索引库之后就不能再修改了。\n可以修改副本的数量。\n方法：\n\tPUT\nurl：\n\thttp://192.168.52.129:9200/{索引名称}/_settings\n例如：\n\thttp://192.168.52.129:9200/blog/_settings\n请求体：\n    {\n\t    "number_of_replicas": "1" # 副本数量\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"_4-文档管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-文档管理"}},[s._v("#")]),s._v(" 4. 文档管理")]),s._v(" "),t("h3",{attrs:{id:"_4-1-添加文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-添加文档"}},[s._v("#")]),s._v(" 4.1 添加文档")]),s._v(" "),t("p",[s._v("向索引中添加一行数据。\n使用"),t("strong",[s._v("json")]),s._v("来表示。\n使用"),t("strong",[s._v("restful")]),s._v("形式的api来实现。\nput：添加\npost：修改\ndelete：删除")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tput\nurl：\n\thttp://192.168.52.129:9200/{索引}/_doc/{_id}\n\t文档的id（_id）推荐和真正数据的id保持一致。\n请求体：\n\t尽量和mapping设置的文档格式保持一致。\n\t{\n\t\t"id":1,\n\t\t"title":"这是一篇文章",\n\t\t"content":"xxxxx",\n\t\t"comment":"备注信息",\n\t\t"mobile":"13344556677"\n\t}\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"_4-2-修改文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-修改文档"}},[s._v("#")]),s._v(" 4.2 修改文档")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tPOST\nurl：\n\thttp://192.168.52.129:9200/{索引}/_doc/{_id}\n请求体：\n\t{\n\t\t"id":1,\n\t\t"title":"这是一篇文章",\n\t\t"content":"xxxxx",\n\t\t"comment":"备注信息",\n\t\t"mobile":"13344556677"\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("strong",[s._v("修改的原理是，先删除后添加")])]),s._v(" "),t("h3",{attrs:{id:"_4-3-删除文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-删除文档"}},[s._v("#")]),s._v(" 4.3 删除文档")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tDELETE\nulr:\n\thttp://192.168.52.129:9200/{索引}/_doc/{_id}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_4-4-根据-id取文档"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-根据-id取文档"}},[s._v("#")]),s._v(" 4.4 根据_id取文档")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tGET\nurl：\n\thttp://192.168.52.129:9200/{索引}/_doc/{_id}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_4-5-使用批处理-bulk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-使用批处理-bulk"}},[s._v("#")]),s._v(" 4.5 使用批处理_bulk")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tPUT、POST\nurl：\n\thttp://192.168.52.129:9200/{索引}/_bulk\n请求体：\n\t{action:{metadata}}\n\t{请求体数据信息json格式}\n\t{action:{metadata}}\n\t{请求体数据信息json格式}\n\t{action:{metadata}}\n\t{请求体数据信息json格式}\n\t{action:{metadata}}\n\t{请求体数据信息json格式}\n\t最后需要有一个换行\n例如：\n\t请求方法：\n\t\tPOST\n\turl：\n\t\thttp://192.168.52.129:9200/blog/_bulk\n\t请求体：\n\t\taction对应的取值：\n\t\t\tcreate：创建一个文档，如果文档不存在就创建。\n\t\t\tindex：创建一个新的文档，如果文档存在就更新。\n\t\t\tupdate：批量更新文档\n\t\t\tdelete：批量删除，不需要有请求体。\n\t\t元数据：\n\t\t\t_index:要写入的索引信息\n\t\t\t_type:要写入的type\n\t\t\t_id:要写入文档的id\n\t\t{"index":{"_id":1}}\n\t\t{"id":1, "title":"这是一篇文章", "content":"xxxxx", "comment":"备注信息", "mobile":"13344556677"}\n\t\t{"index":{"_id":2}}\n\t\t{"id":2, "title":"这是一篇文章", "content":"xxxxx", "comment":"备注信息", "mobile":"13344556677"}\n\t\t{"index":{"_id":3}}\n\t\t{"id":3, "title":"这是一篇文章", "content":"xxxxx", "comment":"备注信息", "mobile":"13344556677"}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("h2",{attrs:{id:"_5-查询数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-查询数据"}},[s._v("#")]),s._v(" 5. 查询数据")]),s._v(" "),t("h3",{attrs:{id:"_5-1-查询的语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-查询的语法"}},[s._v("#")]),s._v(" 5.1 查询的语法")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v("方法：\n\tPOST\nurl：\n\thttp://192.168.52.129:9200"),t("span",{pre:!0,attrs:{class:"token url"}},[s._v("["),t("span",{pre:!0,attrs:{class:"token content"}},[s._v("/{blog}")]),s._v("]["),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("/{type}")]),s._v("]")]),s._v('/_search\n请求体：\n\tjson形式的查询语句\n\t{\n\t\t"query":{\n\t\t\t"xxxx"\n\t\t}\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"_5-2-查询全部数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-查询全部数据"}},[s._v("#")]),s._v(" 5.2 查询全部数据")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('match_all查询\n{\n\t"query":{\n\t\t"match_all":{}\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_5-3-termquery-关键词查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-termquery-关键词查询"}},[s._v("#")]),s._v(" 5.3 termQuery 关键词查询")]),s._v(" "),t("p",[s._v("是所有查询中最级基本的一个查询。\n根据关键词进行查询，如果关键词在索引中存在那么就有结果，\n如果关键词不存在就查询不到结果。ES不会再次对查询的内容进行分词处理。")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('需要指定两部分内容：\n    1）要查询的关键词\n    2）要查询的字段    \n    {\n        "query":{\n            "term":{\n                "title":"java"\n            }\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h4",{attrs:{id:"分词器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分词器"}},[s._v("#")]),s._v(" "),t("strong",[s._v("分词器")])]),s._v(" "),t("p",[s._v("默认使用的是standard分词器。处理英文根据空格进行分词处理。如果处理中文，是一个汉字一个关键词。\n原文：传苹果正开发新Apple TV 或集成音响和摄像头\n分词结果：\n传\n苹\n果\n正\n开\n发\n新\nApple\nTV\n或\n集\n成\n音\n响\n和\n摄\n像\n头")]),s._v(" "),t("h3",{attrs:{id:"_5-4-querystring查询-根据查询字符串查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-querystring查询-根据查询字符串查询"}},[s._v("#")]),s._v(" 5.4 QueryString查询，根据查询字符串查询")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('查询条件可以指定一个字符串，在查询之前，可以对查询条件进行分词处理，然后基于分词之后的结果再次查询。\n    {\n        "query":{\n            "query_string":{\n                "default_field":"title",\n                "query":"传苹果正开发新Apple TV 或集成音响和摄像头"\n            }\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_5-5-match查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-match查询"}},[s._v("#")]),s._v(" 5.5 match查询")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('功能和query_string相同。\n    {\n        "query":{\n            "match":{\n                "title":"传苹果正开发新Apple TV 或集成音响和摄像头"\n            }\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_5-6-multi-match查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-multi-match查询"}},[s._v("#")]),s._v(" 5.6 multi_match查询")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('可以指定在多个字段中查询\n    {\n        "query":{\n            "multi_match":{\n                "query":"苹果",\n                "fields":["title","content"]\n            }\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_5-7-bool查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-bool查询"}},[s._v("#")]),s._v(" 5.7 bool查询")]),s._v(" "),t("h4",{attrs:{id:"_5-7-1-组合条件查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-1-组合条件查询"}},[s._v("#")]),s._v(" 5.7.1 组合条件查询")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('逻辑关系：\n\tmust：必须满足，相当于是AND\n\tshould：应该满足，相当于OR\n\tmust_not:必须不能满足，相当于NOT\n语法：\n\t{\n\t\t"query":{\n\t\t\t"bool":{\n\t\t\t\t"must":[],\n\t\t\t\t"should":[],\n\t\t\t\t"must_not":[],\n\t\t\t\t"filter":[]\n\t\t\t}\n\t\t}\n\t}\n案例：\n    {\n        "query":{\n            "bool":{\n                "must":[\n                    {\n                        "match":{\n                            "title":"apple"\n                        }\n                    },\n                    {\n                        "match":{\n                            "content":"apple"\n                        }\n                    }\n                ]\n            }\n        }\t\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("h4",{attrs:{id:"_5-7-2-filter过滤查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-2-filter过滤查询"}},[s._v("#")]),s._v(" 5.7.2 filter过滤查询")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('在bool查询的filter节点中可以包含多个查询条件，条件之间层层过滤。\n也可以直接使用filter进行数据的查询。filter查询是不进行打分处理。查询性能好于query。\n\n相关度排序：\n\tSEO：搜索引擎优化。\n\n两个指标：\n\tTF：关键词在文章中出现的频率。TF越大相关度越高。\n\tDF：所有文档中关键词出现的频率。DF越大相关度越低。例如 and\n\t根据TF和DF计算出一个相关度的得分，得分越高相关度越高，文档根据相关度得分进行降序排列。\n\t{\n        "query":{\n            "bool":{\n                "filter":[\n                    {\n                        "term":{\n                            "title":"apple"\n                        }\n                    }\n                ]\n            }\n        }\t\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"_5-8-高亮处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-8-高亮处理"}},[s._v("#")]),s._v(" 5.8 高亮处理")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('在查询结果中将查询的关键词左右两边分别加上成对的html标签。\n高亮的处理在查询条件中指定。\n\t{\n\t\t"query":{\n\t\t\t"bool":{\n\t\t\t\t"must":[\n\t\t\t\t\t{\n\t\t\t\t\t\t"term":{\n\t\t\t\t\t\t\t"title":"apple"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t"heightligth":{\n\t\t\t--设置高亮显示的字段\n\t\t\t"fields":{\n\t\t\t\t"title":{},\n\t\t\t\t"content":{}\n\t\t\t}\n\t\t\t--设置关键词的前缀\n\t\t\t"pre_tag":"'),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("em")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v('",\n\t\t\t--设置关键词的后缀\n\t\t\t"post_tag":"'),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("em")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v('"\n\t\t}\t\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("h3",{attrs:{id:"_5-9-查询结果分页"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-9-查询结果分页"}},[s._v("#")]),s._v(" 5.9 查询结果分页")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('在query查询条件中增加两个属性\n\tfrom：起始的行号，从0开始\n\tsize：每页显示的记录数量\nPOST /blog/_search\n{\n\t"query":{\n\t\t"multi_match":{\n\t\t\t"query":"苹果正开发",\n\t\t\t"fields":["title","content"]\n\t\t}\n\t},\n\t"highlight": {\n\t  "fields": {\n\t    "title": {}\n\t    , "content": {}\n\t  },\n\t  "pre_tags": "'),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("em")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v('",\n\t  "post_tags": "'),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("em")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v('"\n\t},\n\t"from": 10,\n\t"size": 5\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h2",{attrs:{id:"_6-中文分词器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-中文分词器"}},[s._v("#")]),s._v(" 6. 中文分词器")]),s._v(" "),t("p",[s._v("中文分词器都是国产的。\nIk-analyzer")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("Ik的使用方法\n1）下载ES对应版本的ik分词器\n2）把分词器解压缩\n3）把解压之后的目录放到{ES}/plugin目录下\n4）重启ES")])]),s._v(" "),t("li",[t("p",[s._v("分词器的测试方法")]),s._v(" "),t("div",{staticClass:"language-markdown line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-markdown"}},[t("code",[s._v('方法：\n\tPOST\nurl：\n\thttp://192.168.68.129:9200/_analyze\n方法体：\n\t{\n\t\t"analyzer":"standard",\n\t\t"text":"and productivity has made it the world\'s most popular Java framework."\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("IK一旦安装之后有两个分词算法：\n"),t("strong",[s._v("ik_smart")]),s._v("：快速分词，速度快，粒度比较粗，很多词语不会分词出来。\n"),t("strong",[s._v("ik_max_word")]),s._v("：最大数量分词，速度慢，粒度细，所有词语都会分词出来。")])]),s._v(" "),t("li",[t("p",[s._v("索引一旦创建完毕不能修改分词器的")]),s._v(" "),t("p",[s._v("如果使用中文分词，应该在创建索引时，设置mapping的过程中指定使用中文分词器。")])])]),s._v(" "),t("h2",{attrs:{id:"_7-field的数据类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-field的数据类型"}},[s._v("#")]),s._v(" 7.  field的数据类型")]),s._v(" "),t("ul",[t("li",[s._v("数值类型：int、long、float、double")]),s._v(" "),t("li",[s._v("字符串：\n"),t("strong",[s._v("text")]),s._v("：需要分词的字段必须使用text，只有text类型才能支持分词器。\n"),t("strong",[s._v("keyword")]),s._v("：不需要对字段的内容进行分词处理时，可以使用keyword数据类型。\n例如：身份证号、手机号、订单号等。")]),s._v(" "),t("li",[s._v("日期：data")])]),s._v(" "),t("p",[s._v("字段的三个属性：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("是否分词 (type)：\n是否是text类型。例如文章的title、content都需要分词。")])]),s._v(" "),t("li",[t("p",[s._v("是否索引 (index)：\n是否对field的内容进行索引。如果text数据类型一定需要创建索引，分词之后一定要创建索引。\n不分词也可以把field的内容添加到索引中，使用keyword数据类型。\n也可以索引field中的内容。")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("例如文件的path，不需要分词，不需要索引，只需要存储即可。\n"),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"keyword"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"index"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"store"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("​")])]),s._v(" "),t("li",[t("p",[s._v("是否存储 (store)：\n定义field时，store属性是否是true。\n如果是true那么就存储，false不存储。\n无论是否存储，不影响分词、创建索引、搜索。")]),s._v(" "),t("p",[s._v("​\t影响的范围就是是否能在查询结果中看到原始内容。")])])])])}),[],!1,null,null,null);n.default=e.exports}}]);